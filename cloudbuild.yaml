steps:
- name: node:14
  entrypoint: npm
  args: ['install', 'typescript']
- name: node:14
  entrypoint: npm
  args: ['install']
  # run webpack prod script to create static files
- name: node:14
  entrypoint: npm
  args: ['run','build']
  env:
  - 'REACT_APP_API_KEY_NOAH=${eyJzb3VsSWQiOiJkZG5hLWRhcnRtb3V0aC1jb2xsZWdlYmU0Zi0tbm9haGRlcGxveW1lbnQiLCJhdXRoU2VydmVyIjoiaHR0cHM6Ly9kaC5hei5zb3VsbWFjaGluZXMuY2xvdWQvYXBpL2p3dCIsImF1dGhUb2tlbiI6ImFwaWtleV92MV82OGYyYWZjNi1lNjg2LTQ1ZTItODViYS0wY2U4ZTBmMzcxZGMifQ==}'

  - 'REACT_APP_API_KEY_EA_MALE=${eyJzb3VsSWQiOiJkZG5hLWRhcnRtb3V0aC1jb2xsZWdlYmU0Zi0tZWFtYWxlIiwiYXV0aFNlcnZlciI6Imh0dHBzOi8vZGguYXouc291bG1hY2hpbmVzLmNsb3VkL2FwaS9qd3QiLCJhdXRoVG9rZW4iOiJhcGlrZXlfdjFfMjE0MDU1NTMtYzQxYS00YThhLTk0ZWMtOTU1MWE4ZDgzYmJmIn0=}'
  - 'REACT_APP_API_KEY_EA_FEMALE=${eyJzb3VsSWQiOiJkZG5hLWRhcnRtb3V0aC1jb2xsZWdlYmU0Zi0tZWFmZW1hbGUiLCJhdXRoU2VydmVyIjoiaHR0cHM6Ly9kaC5hei5zb3VsbWFjaGluZXMuY2xvdWQvYXBpL2p3dCIsImF1dGhUb2tlbiI6ImFwaWtleV92MV9kMTYwZjBiYi02NzZmLTQ1NGEtYTA2OS1mMWQ0MmI0NTM1ZmMifQ==}'
  - 'REACT_APP_API_KEY_AF_MALE=${eyJzb3VsSWQiOiJkZG5hLWRhcnRtb3V0aC1jb2xsZWdlYmU0Zi0tYWZtYWxlIiwiYXV0aFNlcnZlciI6Imh0dHBzOi8vZGguYXouc291bG1hY2hpbmVzLmNsb3VkL2FwaS9qd3QiLCJhdXRoVG9rZW4iOiJhcGlrZXlfdjFfNTQ4Y2UzZTMtNDk0Ni00MDJlLWFkMjgtYTQ3ZWQ0OTBhMjdkIn0=}'
  - 'REACT_APP_API_KEY_AF_FEMALE=${eyJzb3VsSWQiOiJkZG5hLWRhcnRtb3V0aC1jb2xsZWdlYmU0Zi0tYWZmZW1hbGUiLCJhdXRoU2VydmVyIjoiaHR0cHM6Ly9kaC5hei5zb3VsbWFjaGluZXMuY2xvdWQvYXBpL2p3dCIsImF1dGhUb2tlbiI6ImFwaWtleV92MV8yYjcyN2ZiZC1mZTY2LTQ5YjQtOWQ0Zi0zYjUzMDBiMjExODkifQ==}'
  - 'REACT_APP_API_KEY_CS_MALE=${eyJzb3VsSWQiOiJkZG5hLWRhcnRtb3V0aC1jb2xsZWdlYmU0Zi0tY3NtYWxlIiwiYXV0aFNlcnZlciI6Imh0dHBzOi8vZGguYXouc291bG1hY2hpbmVzLmNsb3VkL2FwaS9qd3QiLCJhdXRoVG9rZW4iOiJhcGlrZXlfdjFfM2IwMzQwMjItZDEyZS00OTIwLTkwOGUtY2MxNmEyNzU5YTZiIn0=}'
  - 'REACT_APP_API_KEY_CS_FEMALE=${eyJzb3VsSWQiOiJkZG5hLWRhcnRtb3V0aC1jb2xsZWdlYmU0Zi0tY3NmZW1hbGUiLCJhdXRoU2VydmVyIjoiaHR0cHM6Ly9kaC5hei5zb3VsbWFjaGluZXMuY2xvdWQvYXBpL2p3dCIsImF1dGhUb2tlbiI6ImFwaWtleV92MV8zNWQ3MWZmNi04OGZiLTRlYTYtYjUxYi01NDIyOWEzNzZmNmYifQ==}'
    
    - 'REACT_APP_GA_TRACKING_ID=G-G5GWJ2XYRS'
    - 'DISABLE_ESLINT_PLUGIN=true'
    - 'REACT_APP_SESSION_SERVER=${_SESSION_SERVER}'
    - 'REACT_APP_PERSONA_AUTH_MODE=0'
    - 'REACT_APP_ORCHESTRATION_MODE=false'
    - 'GENERATE_SOURCEMAP=false'
- name: "gcr.io/cloud-builders/gcloud"
  args: ["app", "deploy"]
timeout: "1600s"
